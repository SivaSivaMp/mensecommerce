 <%-include("../../views/partials/user/header")%>
 <style>
    .error-message {
            color: #dc3545;
            font-size: 0.875rem;
            margin-top: 0.25rem;
            margin-bottom: 0.5rem;
            display: none;
        }

 </style>
    
        <!-- page-title -->
        <div class="tf-page-title style-2">
            <div class="container-full">
                <div class="heading text-center">Register</div>
            </div>
        </div>
        <!-- /page-title -->
    
        <section class="flat-spacing-10">
            <div class="container">
                <div class="form-register-wrap">
                    <div class="flat-title align-items-start gap-0 mb_30 px-0">
                        <h5 class="mb_1">Register</h5>
                        
                    </div>
                    <div>
                        <form class="" id="register-form"  accept-charset="utf-8" data-mailchimp="true">
                            <div class="tf-field style-1 mb_15">
                                <input class="tf-field-input tf-input" placeholder=" " type="text" id="property1" name="name">
                                <label class="tf-field-label fw-4 text_black-2" for="property1">Full name</label>
                            </div>
                            <div id="error-1" class="error-message"></div>
                            <div class="tf-field style-1 mb_15">
                                <input class="tf-field-input tf-input" placeholder=" " type="email" id="property3" name="email">
                                <label class="tf-field-label fw-4 text_black-2" for="property3">Email *</label>
                            </div>
                            <div id="error-2" class="error-message"></div>
                            <div class="tf-field style-1 mb_15">
                                <input class="tf-field-input tf-input" placeholder=" " type="password" id="property4" name="password">
                                <label class="tf-field-label fw-4 text_black-2" for="property4">Password *</label>
                            </div>
                            <div id="error-3" class="error-message"></div>

                            <div class="tf-field style-1 mb_30">
                                <input class="tf-field-input tf-input" placeholder=" " type="password" id="property5" name="cpassword">
                                <label class="tf-field-label fw-4 text_black-2" for="property5">Confirm Password *</label>
                            </div>
                            <div id="error-4" class="error-message"></div>
                            <div class="mb_20">
                                <a href="/login" class="tf-btn btn-line">Already have an account? Log in here<i class="icon icon-arrow1-top-left"></i></a>
                            </div>
                            <div class="mb_20">
                                <button type="submit" class="tf-btn w-100 radius-3 btn-fill animate-hover-btn justify-content-center mb_5">Register</button>
                            </div>
                            <div id="error-message" class="alert alert-danger d-none" role="alert"></div>
                            <div id="success-message" class="alert alert-success d-none" role="alert"></div>

                            <div class="">
                                <!-- <button type="submit" class="tf-btn w-100 radius-3 btn-fill-google animate-hover-btn justify-content-center "><img src="https://img.icons8.com/color/16/000000/google-logo.png" class="me-2"/>Log in with Google</i></button> -->
                                <a href="/auth/google" class=" w-100 radius-3 btn-fill-google animate-hover-btn justify-content-center p-2 text-center"><img src="https://img.icons8.com/color/16/000000/google-logo.png" class="me-2"/>Log in with Google</i></a>
                            </div>
                            
                        </form>
                    </div>
                </div>
            </div>
        </section>
        <script src="/others/formvalidation.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
  const form = document.getElementById("register-form");
  const errorBox = document.getElementById("error-message");
  const successBox = document.getElementById("success-message");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    // Clear messages first
    errorBox.classList.add("d-none");
    successBox.classList.add("d-none");

    const formData = {
      name: document.getElementById("property1").value,
      email: document.getElementById("property3").value,
      password: document.getElementById("property4").value,
      cpassword: document.getElementById("property5").value,
    };

    try {
      const res = await axios.post("/signup", formData);

      if (res.data.status === "success") {
        successBox.textContent = res.data.message;
        successBox.classList.remove("d-none");

        // redirect after short delay
        setTimeout(() => {
          window.location.href = res.data.redirectUrl;
        }, 1500);
      }
    } catch (err) {
      const msg = err.response?.data?.message || "Something went wrong";
      errorBox.textContent = msg;
      errorBox.classList.remove("d-none");
    }
  });
</script>

   <%-include("../../views/partials/user/footer")%>